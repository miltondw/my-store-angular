"use strict";(self.webpackChunkmy_store=self.webpackChunkmy_store||[]).push([[556],{5556:(at,v,i)=>{i.r(v),i.d(v,{ProductsModule:()=>s});var Z=i(6895),d=i(1635),t=i(4650),T=i(9531),a=i(7155),C=i(7392),h=i(4859);function y(o,e){1&o&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"No."),t.qZA())}function F(o,e){if(1&o&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&o){const r=e.$implicit;t.xp6(1),t.Oqu(r.id)}}function A(o,e){1&o&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Title"),t.qZA())}function q(o,e){if(1&o&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&o){const r=e.$implicit;t.xp6(1),t.Oqu(r.title)}}function N(o,e){1&o&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Price"),t.qZA())}function U(o,e){if(1&o&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&o){const r=e.$implicit;t.xp6(1),t.Oqu(r.price)}}function b(o,e){1&o&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Description"),t.qZA())}function Y(o,e){if(1&o&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&o){const r=e.$implicit;t.xp6(1),t.Oqu(r.description)}}function w(o,e){1&o&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Category"),t.qZA())}function I(o,e){if(1&o&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&o){const r=e.$implicit;t.xp6(1),t.Oqu(r.category.name)}}function Q(o,e){1&o&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Image"),t.qZA())}function J(o,e){if(1&o&&(t.TgZ(0,"mat-cell"),t._UZ(1,"img",15),t.qZA()),2&o){const r=e.$implicit;t.xp6(1),t.Q6J("src",r.images[0],t.LSH)("alt",r.title)}}function S(o,e){1&o&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Edit"),t.qZA())}const D=function(o){return["edit",o]};function O(o,e){if(1&o&&(t.TgZ(0,"mat-cell")(1,"a",16)(2,"mat-icon"),t._uU(3,"edit"),t.qZA()()()),2&o){const r=e.$implicit;t.xp6(1),t.Q6J("routerLink",t.VKq(1,D,r.id))}}function k(o,e){1&o&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Delete"),t.qZA())}function B(o,e){if(1&o){const r=t.EpF();t.TgZ(0,"mat-cell")(1,"button",17),t.NdJ("click",function(){const it=t.CHM(r).$implicit,ct=t.oxw();return t.KtG(ct.deleteCategory(it.id))}),t.TgZ(2,"mat-icon"),t._uU(3,"delete"),t.qZA()()()}}function M(o,e){1&o&&t._UZ(0,"mat-header-row")}function j(o,e){1&o&&t._UZ(0,"mat-row")}class p{constructor(e){this.productsService=e,this.displayedColumns=["id","title","price","description","category","images","update","delete"],this.dataSource=[]}ngOnInit(){this.productsService.getProducts().subscribe(e=>{this.dataSource=e.reverse()})}deleteCategory(e){this.productsService.delete(e).subscribe(()=>{this.productsService.getProducts().subscribe(r=>{this.dataSource=r})})}}p.\u0275fac=function(e){return new(e||p)(t.Y36(T.s))},p.\u0275cmp=t.Xpm({type:p,selectors:[["app-products"]],decls:33,vars:3,consts:[[1,"header"],["mat-stroked-button","","color","primary","routerLink","create"],[1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","id"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","title"],["matColumnDef","price"],["matColumnDef","description"],["matColumnDef","category"],["matColumnDef","images"],["matColumnDef","update"],["matColumnDef","delete"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["width","70","height","70",2,"object-fit","contain",3,"src","alt"],["mat-stroked-button","","color","primary",3,"routerLink"],["mat-button","","color","warn","aria-label","icon button wia delete icon",3,"click"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0)(1,"h2"),t._uU(2,"Products"),t.qZA(),t.TgZ(3,"a",1)(4,"mat-icon"),t._uU(5,"add_circle"),t.qZA()()(),t.TgZ(6,"mat-table",2),t.ynx(7,3),t.YNc(8,y,2,0,"mat-header-cell",4),t.YNc(9,F,2,1,"mat-cell",5),t.BQk(),t.ynx(10,6),t.YNc(11,A,2,0,"mat-header-cell",4),t.YNc(12,q,2,1,"mat-cell",5),t.BQk(),t.ynx(13,7),t.YNc(14,N,2,0,"mat-header-cell",4),t.YNc(15,U,2,1,"mat-cell",5),t.BQk(),t.ynx(16,8),t.YNc(17,b,2,0,"mat-header-cell",4),t.YNc(18,Y,2,1,"mat-cell",5),t.BQk(),t.ynx(19,9),t.YNc(20,w,2,0,"mat-header-cell",4),t.YNc(21,I,2,1,"mat-cell",5),t.BQk(),t.ynx(22,10),t.YNc(23,Q,2,0,"mat-header-cell",4),t.YNc(24,J,2,2,"mat-cell",5),t.BQk(),t.ynx(25,11),t.YNc(26,S,2,0,"mat-header-cell",4),t.YNc(27,O,4,3,"mat-cell",5),t.BQk(),t.ynx(28,12),t.YNc(29,k,2,0,"mat-header-cell",4),t.YNc(30,B,4,0,"mat-cell",5),t.BQk(),t.YNc(31,M,1,0,"mat-header-row",13),t.YNc(32,j,1,0,"mat-row",14),t.qZA()),2&e&&(t.xp6(6),t.Q6J("dataSource",r.dataSource),t.xp6(25),t.Q6J("matHeaderRowDef",r.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",r.displayedColumns))},dependencies:[d.rH,a.BZ,a.fO,a.as,a.w1,a.Dz,a.nj,a.ge,a.ev,a.XQ,a.Gk,C.Hw,h.zs,h.lW],styles:[".header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:0 2rem}.header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{background:#3e51b5;color:#fff;display:flex;place-content:flex-end}.mat-mdc-table[_ngcontent-%COMP%]{width:100%;max-height:500px;overflow:auto}.mat-column-name[_ngcontent-%COMP%]{height:100px}.mat-mdc-cell.mdc-data-table__cell.cdk-cell.cdk-column-description.mat-column-description[_ngcontent-%COMP%]{height:100px;overflow-y:scroll}"]});var H=i(4655),c=i(4006),n=i(3546),f=i(9549),P=i(4144),x=i(4385),V=i(3238);function $(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Your Title is required "),t.qZA())}function z(o,e){if(1&o&&(t.TgZ(0,"div",13),t.YNc(1,$,2,0,"mat-error",14),t.qZA()),2&o){const r=t.oxw();t.xp6(1),t.Q6J("ngIf",null==r.titleField?null:r.titleField.hasError("required"))}}function E(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," The Price is required "),t.qZA())}function L(o,e){if(1&o&&(t.TgZ(0,"div",13),t.YNc(1,E,2,0,"mat-error",14),t.qZA()),2&o){const r=t.oxw();t.xp6(1),t.Q6J("ngIf",null==r.titleField?null:r.titleField.hasError("required"))}}function R(o,e){if(1&o&&(t.TgZ(0,"mat-option",15),t._uU(1),t.qZA()),2&o){const r=e.$implicit;t.Q6J("value",r.id),t.xp6(1),t.hij(" ",r.name," ")}}function X(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," The Description is required "),t.qZA())}function G(o,e){if(1&o&&(t.TgZ(0,"div",13),t.YNc(1,X,2,0,"mat-error",14),t.qZA()),2&o){const r=t.oxw();t.xp6(1),t.Q6J("ngIf",null==r.titleField?null:r.titleField.hasError("required"))}}function K(o,e){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," The image is required "),t.qZA())}function W(o,e){if(1&o&&(t.TgZ(0,"div",13),t.YNc(1,K,2,0,"mat-error",14),t.qZA()),2&o){const r=t.oxw();t.xp6(1),t.Q6J("ngIf",null==r.imagesField?null:r.imagesField.hasError("required"))}}function tt(o,e){if(1&o&&t._UZ(0,"img",16),2&o){const r=t.oxw();t.Q6J("src",null==r.imagesField?null:r.imagesField.value[0],t.LSH)("alt",null==r.titleField?null:r.titleField.value)}}class g{set product(e){e&&(this.isNew=!1,this.categoryField?.setValue(e.category.id),this.form.patchValue(e))}constructor(e){this.fb=e,this.isNew=!0,this.categories=[],this.create=new t.vpe,this.update=new t.vpe,this.form=new c.cw({}),this.buildForm()}buildForm(){this.form=this.fb.group({title:["",c.kI.required],price:["",c.kI.required],description:["",c.kI.required],categoryId:["",c.kI.required],images:[[""],c.kI.required]})}save(){this.form.valid?this.isNew?this.create.emit(this.form.value):(this.update.emit(this.form.value),console.log(this.form.value,"save")):this.form.markAllAsTouched()}validValues(e){return this.form.get(e)?.touched&&this.form.get(e)?.invalid}get titleField(){return this.form.get("title")}get imagesField(){return this.form.get("images")}get categoryField(){return this.form.get("categoryId")}}g.\u0275fac=function(e){return new(e||g)(t.Y36(c.qu))},g.\u0275cmp=t.Xpm({type:g,selectors:[["app-form-products"]],inputs:{categories:"categories",product:"product"},outputs:{create:"create",update:"update"},decls:49,vars:10,consts:[[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-xs"],["placeholder","Title","formControlName","title","matInput","","type","text"],["class","messages",4,"ngIf"],["placeholder","Price","formControlName","price","matInput","","type","number"],["appearance","fill"],["formControlName","categoryId","name","categoryId",3,"value"],[3,"value",4,"ngFor","ngForOf"],["placeholder","Description","formControlName","description","matInput","","type","text"],["placeholder","Image","formControlName","images","matInput","","type","text"],["width","70","style","object-fit: contain","height","70",3,"src","alt",4,"ngIf"],["mat-raised-button","","type","submit"],[1,"messages"],[4,"ngIf"],[3,"value"],["width","70","height","70",2,"object-fit","contain",3,"src","alt"]],template:function(e,r){1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return r.save()}),t.TgZ(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title"),t._uU(4),t.qZA()(),t.TgZ(5,"mat-card-content")(6,"div",1)(7,"div",2)(8,"mat-form-field")(9,"mat-label"),t._uU(10,"Title"),t.qZA(),t._UZ(11,"input",3),t.YNc(12,z,2,1,"div",4),t.qZA()()(),t.TgZ(13,"div",1)(14,"div",2)(15,"mat-form-field")(16,"mat-label"),t._uU(17,"Price"),t.qZA(),t._UZ(18,"input",5),t.YNc(19,L,2,1,"div",4),t.qZA()()(),t.TgZ(20,"div",1)(21,"div",2)(22,"mat-form-field",6)(23,"mat-label"),t._uU(24,"Category"),t.qZA(),t.TgZ(25,"mat-select",7),t.YNc(26,R,2,2,"mat-option",8),t.qZA()()()(),t.TgZ(27,"div",1)(28,"div",2)(29,"mat-form-field")(30,"mat-label"),t._uU(31,"Description"),t.qZA(),t._UZ(32,"input",9),t.YNc(33,G,2,1,"div",4),t.qZA()()(),t.TgZ(34,"div",1)(35,"div",2)(36,"mat-form-field")(37,"mat-label"),t._uU(38,"Image"),t.qZA(),t._UZ(39,"input",10),t.YNc(40,W,2,1,"div",4),t.qZA(),t.YNc(41,tt,1,2,"img",11),t.TgZ(42,"mat-hint"),t._uU(43,"example: "),t.TgZ(44,"i"),t._uU(45,"https://picsum.photos/200"),t.qZA()()()()(),t.TgZ(46,"mat-card-actions")(47,"button",12),t._uU(48),t.qZA()()()()),2&e&&(t.Q6J("formGroup",r.form),t.xp6(4),t.hij("",r.isNew?"Create":"Update"," Product"),t.xp6(8),t.Q6J("ngIf",r.validValues("title")),t.xp6(7),t.Q6J("ngIf",r.validValues("price")),t.xp6(6),t.Q6J("value",null==r.categoryField?null:r.categoryField.value),t.xp6(1),t.Q6J("ngForOf",r.categories),t.xp6(7),t.Q6J("ngIf",r.validValues("description")),t.xp6(7),t.Q6J("ngIf",r.validValues("images")),t.xp6(1),t.Q6J("ngIf",!r.isNew),t.xp6(7),t.hij(" ",r.isNew?"Create":"Update"," Product "))},dependencies:[Z.sg,Z.O5,c._Y,c.Fj,c.wV,c.JJ,c.JL,c.sg,c.u,h.lW,n.a8,n.hq,n.dn,n.dk,n.n5,f.KE,f.hX,f.bx,f.TO,P.Nt,x.gD,V.ey]});class l{constructor(e,r,_,u){this.categoryService=e,this.productsService=r,this.router=_,this.route=u}ngOnInit(){this.route.params.subscribe(e=>{e.id&&this.getProduct(e.id),this.getCategories()})}getCategories(){this.categoryService.getCategories().subscribe(e=>{this.categories=e})}getProduct(e){this.productsService.getProduct(e).subscribe(r=>{this.product=r})}createProduct(e){Array.isArray(e.images)||(e.images=Array(e.images)),this.productsService.create(e).subscribe(()=>{this.router.navigate(["/admin/products/"])})}updateProduct(e){console.log(e,"update"),this.productsService.update(this.product.id,e).subscribe(()=>{this.router.navigate(["/admin/products/"])})}}l.\u0275fac=function(e){return new(e||l)(t.Y36(H.H),t.Y36(T.s),t.Y36(d.F0),t.Y36(d.gz))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-smart-form-products"]],decls:1,vars:2,consts:[[3,"categories","product","create","update"]],template:function(e,r){1&e&&(t.TgZ(0,"app-form-products",0),t.NdJ("create",function(u){return r.createProduct(u)})("update",function(u){return r.updateProduct(u)}),t.qZA()),2&e&&t.Q6J("categories",r.categories)("product",r.product)},dependencies:[g]});const et=[{path:"",component:p},{path:"create",component:l},{path:"edit/:id",component:l}];class m{}m.\u0275fac=function(e){return new(e||m)},m.\u0275mod=t.oAB({type:m}),m.\u0275inj=t.cJS({imports:[d.Bz.forChild(et),d.Bz]});var ot=i(6308),rt=i(7974);class s{}s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[Z.ez,m,c.UX,a.p0,ot.JX,rt.TU,C.Ps,h.ot,n.QW,f.lN,P.c,x.LD]})}}]);