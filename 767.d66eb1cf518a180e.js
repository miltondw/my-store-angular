"use strict";(self.webpackChunkmy_store=self.webpackChunkmy_store||[]).push([[767],{7767:(m,u,e)=>{e.r(u),e.d(u,{CategoryModule:()=>c});var h=e(6895),g=e(4466),a=e(1635),d=e(3900),o=e(4650),p=e(4655),y=e(9833);class n{constructor(t,r){this.route=t,this.categoryService=r,this.products=[],this.productId=null,this.categoryName="",this.limit=10,this.offset=0,this.btnMoreActive=!0,this.countProducts=10,this.categoryId=null}ngOnInit(){this.route.paramMap.pipe((0,d.w)(t=>(this.categoryId=t.get("id"),this.categoryId?this.categoryService.getCategoryByPage(this.limit,this.offset,this.categoryId):[])),(0,d.w)(t=>(this.products=t,this.products[0].category.name&&(this.categoryName=this.products[0].category.name),this.categoryService.getProductsByCategory(this.categoryId)))).subscribe(t=>{this.countProducts=t.length,this.products.length===this.countProducts&&(this.btnMoreActive=!1)}),this.route.queryParamMap.subscribe(t=>{this.productId=t.get("product")})}onLoadMore(){this.categoryService.getCategoryByPage(this.limit,this.offset,this.categoryId).subscribe(t=>{this.products=this.products.concat(t),this.offset+=this.limit,this.products.length===this.countProducts&&(this.btnMoreActive=!1)})}}n.\u0275fac=function(t){return new(t||n)(o.Y36(a.gz),o.Y36(p.H))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-category"]],decls:3,vars:4,consts:[[3,"btnMoreActive","productId","products","loadMore"]],template:function(t,r){1&t&&(o.TgZ(0,"h2"),o._uU(1),o.qZA(),o.TgZ(2,"app-products",0),o.NdJ("loadMore",function(){return r.onLoadMore()}),o.qZA()),2&t&&(o.xp6(1),o.hij(" Category: ",r.categoryName,"\n"),o.xp6(1),o.Q6J("btnMoreActive",r.btnMoreActive)("productId",r.productId)("products",r.products))},dependencies:[y.P],styles:["h2[_ngcontent-%COMP%]{text-align:center;margin:1rem;color:#008180}"]});const l=[{path:":id",component:n}];class s{}s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=o.oAB({type:s}),s.\u0275inj=o.cJS({imports:[a.Bz.forChild(l),a.Bz]});class c{}c.\u0275fac=function(t){return new(t||c)},c.\u0275mod=o.oAB({type:c}),c.\u0275inj=o.cJS({imports:[h.ez,s,g.m]})}}]);